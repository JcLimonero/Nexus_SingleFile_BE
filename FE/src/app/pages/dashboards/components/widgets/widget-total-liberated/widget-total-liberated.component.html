<div class="widget-total-liberated">
  <div *ngIf="loading" class="flex justify-center items-center h-32">
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <div *ngIf="error" class="text-center text-red-600 p-4">
    <mat-icon class="text-red-500 mb-2">error</mat-icon>
    <p>{{ error }}</p>
  </div>

  <!-- Single card for all states -->
  <mat-card *ngIf="!loading && !error && data" class="metric-card">
    <div class="flex items-center space-x-4 p-4">
      <div class="flex-shrink-0">
        <div class="icon-container rounded-lg flex items-center justify-center"
             [class.bg-green-100]="data.total > 0"
             [class.bg-gray-100]="data.total === 0">
          <mat-icon class="widget-icon"
                    [class.text-green-600]="data.total > 0"
                    [class.text-gray-400]="data.total === 0">check_circle</mat-icon>
        </div>
      </div>
      <div class="flex-1 min-w-0">
        <div class="text-2xl font-bold"
             [class.text-blue-500]="data.total > 0"
             [class.text-gray-400]="data.total === 0">{{ data.total | number }}</div>
        <div class="text-sm font-medium"
             [class.text-gray-700]="data.total > 0"
             [class.text-gray-500]="data.total === 0">Expedientes</div>
        <div class="text-xs"
             [class.text-gray-500]="data.total > 0"
             [class.text-gray-400]="data.total === 0">Liberados Total</div>
      </div>
    </div>
  </mat-card>
</div>
