// Importar estilos compartidos para widgets de métricas
@import '../components/widgets/shared-metric-widget-styles.scss';

// CSS global para forzar el grid de métricas principales - Optimizado para mejor uso del espacio
.metrics-main-grid {
  display: grid !important;
  grid-template-columns: repeat(6, 1fr) !important;
  gap: 0.5rem !important; // Reducido de 0.75rem
  width: 100% !important;
  
  // Sobrescribir cualquier estilo que pueda interferir
  * {
    box-sizing: border-box !important;
  }
  
  // Forzar que todos los elementos hijos sean grid items
  > * {
    display: block !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    position: relative !important; // Evitar superposición
    z-index: 1 !important; // Asegurar orden de apilamiento
  }
  
  // Asegurar que los widgets no se superpongan
  .widget-container {
    position: relative !important;
    z-index: 1 !important;
    overflow: hidden !important; // Evitar desbordamiento
  }
  
  // Responsive con gaps optimizados
  @media (max-width: 479px) {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.375rem !important; // Reducido de 0.5rem
  }
  
  @media (min-width: 480px) and (max-width: 767px) {
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 0.4375rem !important; // Reducido de 0.625rem
  }
}

// Estilos globales para el dashboard de analytics
.dashboard-analytics {
  // Espaciado general del dashboard optimizado
  padding: 0.5rem; // Padding responsive
  
  @media (min-width: 768px) {
    padding: 1rem;
  }
  
  .dashboard-section {
    margin-bottom: 1.25rem; // Reducido de 2rem
    
    .section-title {
      margin-bottom: 1rem; // Reducido de 1.5rem
      padding-bottom: 0.375rem; // Reducido de 0.5rem
      border-bottom: 2px solid #f0f0f0;
      font-size: 1.125rem; // Reducido de text-xl
      
      // Responsive para títulos
      @media (max-width: 479px) {
        font-size: 1rem;
        margin-bottom: 0.75rem;
      }
    }
  }

  // Estilos consistentes para todos los widgets optimizados
  .widget-container {
    height: 100%;
    min-height: 160px; // Reducido de 200px
    
    // Espaciado interno consistente optimizado
    .widget-content {
      padding: 1.25rem; // Reducido de 1.5rem
      height: 100%;
    }
    
    // Cards con estilo consistente
    .widget-card {
      height: 100%;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      border: 1px solid #e0e0e0;
      background: white;
      
      &:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }
    }
  }

  // Grid responsivo mejorado con espaciado optimizado
  .widget-grid {
    display: grid;
    gap: 1rem; // Reducido de 1.5rem
    
    // Grid de 1 columna por defecto
    grid-template-columns: 1fr;
    
    // Grid de 2 columnas en pantallas medianas
    @media (min-width: 768px) {
      grid-template-columns: repeat(2, 1fr);
    }
    
    // Grid de 3 columnas en pantallas grandes
    @media (min-width: 1024px) {
      grid-template-columns: repeat(3, 1fr);
    }
    
    // Grid de 4 columnas en pantallas extra grandes
    @media (min-width: 1280px) {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  // Grid específico para distribución (2 columnas) optimizado
  .distribution-grid {
    display: grid;
    gap: 1rem; // Reducido de 1.5rem
    grid-template-columns: 1fr;
    
    @media (min-width: 1024px) {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  // Grid específico para estatus (3 columnas) optimizado
  .status-grid {
    display: grid;
    gap: 1rem; // Reducido de 1.5rem
    grid-template-columns: 1fr;
    
    @media (min-width: 768px) {
      grid-template-columns: repeat(2, 1fr);
    }
    
    @media (min-width: 1024px) {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  // Grid específico para análisis temporal (2 columnas)
  .temporal-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: 1fr;
    
    @media (min-width: 1024px) {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  // Grid específico para rendimiento (2 columnas)
  .performance-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: 1fr;
    
    @media (min-width: 1024px) {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  // Estilos para contenedores de gráficos
  .chart-container {
    height: 100%;
    min-height: 300px; // Reducido de 350px
    
    .chart-content {
      padding: 1.25rem; // Reducido de 1.5rem
      height: 100%;
    }
  }

  // Estilos para filtros responsive
  .filters-container {
    .mat-form-field {
      @media (max-width: 479px) {
        font-size: 14px;
        
        .mat-form-field-wrapper {
          padding-bottom: 0.5em;
        }
        
        .mat-form-field-infix {
          padding: 0.5em 0;
        }
      }
    }
  }

  // Responsive adjustments optimizados
  @media (max-width: 768px) {
    .widget-container {
      min-height: 120px; // Reducido de 150px
      
      .widget-content {
        padding: 0.875rem; // Reducido de 1rem
      }
    }
    
    .metric-card {
      min-height: 80px; // Reducido de 100px
      
      .metric-content {
        padding: 0.75rem; // Reducido de 1rem
        gap: 0.5rem; // Reducido de 0.75rem
      }
      
      .metric-icon {
        width: 32px; // Reducido de 40px
        height: 32px; // Reducido de 40px
        
        mat-icon {
          font-size: 16px; // Reducido de 20px
          width: 16px; // Reducido de 20px
          height: 16px; // Reducido de 20px
        }
      }
      
      .metric-info {
        .metric-number {
          font-size: 20px; // Reducido de 24px
        }
        
        .metric-label {
          font-size: 12px; // Reducido de 13px
        }
        
        .metric-subtitle {
          font-size: 10px; // Reducido de 11px
        }
      }
    }
    
    .chart-container {
      min-height: 200px; // Reducido de 250px
      
      .chart-content {
        padding: 0.875rem; // Reducido de 1rem
      }
    }

    // Responsive para widgets de métricas principales
    .widget-today-cases,
    .widget-monthly-cases,
    .widget-total-cases,
    .widget-current-month-liberated,
    .widget-total-liberated,
    .widget-agency-users {
      .flex-shrink-0 .w-12 {
        width: 2rem !important; // Reducido de 3rem
        height: 2rem !important; // Reducido de 3rem
      }
      
      .text-2xl {
        font-size: 1.25rem !important; // Reducido de 1.5rem
      }
      
      .text-sm {
        font-size: 0.75rem !important; // Reducido de 0.875rem
      }
      
      .text-xs {
        font-size: 0.625rem !important; // Reducido de 0.75rem
      }
      
      .p-4 {
        padding: 0.75rem !important; // Reducido para móviles
      }

      .space-x-4 {
        gap: 0.5rem !important; // Reducido para móviles
      }
    }
  }
}