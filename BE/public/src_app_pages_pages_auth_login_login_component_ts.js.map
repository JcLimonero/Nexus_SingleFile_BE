{"version":3,"file":"src_app_pages_pages_auth_login_login_component_ts.js","mappings":"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","sources":["./src/@vex/animations/fade-in-up.animation.ts","./src/app/pages/pages/auth/login/login.component.ts","./src/app/pages/pages/auth/login/login.component.html"],"sourcesContent":["import { animate, style, transition, trigger } from '@angular/animations';\n\nexport function fadeInUpAnimation(duration: number) {\n  return trigger('fadeInUp', [\n    transition(':enter', [\n      style({\n        transform: 'translateY(20px)',\n        opacity: 0\n      }),\n      animate(\n        `${duration}ms cubic-bezier(0.35, 0, 0.25, 1)`,\n        style({\n          transform: 'translateY(0)',\n          opacity: 1\n        })\n      )\n    ])\n  ]);\n}\n\nexport const fadeInUp400ms = fadeInUpAnimation(400);\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component\n} from '@angular/core';\nimport { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { Router, RouterLink } from '@angular/router';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { fadeInUp400ms } from '@vex/animations/fade-in-up.animation';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\nimport { NgIf } from '@angular/common';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { AuthService, AuthResponse } from '../../../../core/services/auth.service';\n\n@Component({\n  selector: 'vex-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [fadeInUp400ms],\n  standalone: true,\n  imports: [\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    NgIf,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatCheckboxModule,\n    RouterLink,\n    MatSnackBarModule\n  ]\n})\nexport class LoginComponent {\n  form = this.fb.group({\n    email: ['', [Validators.required, Validators.email]],\n    password: ['', Validators.required]\n  });\n\n  inputType = 'password';\n  visible = false;\n  loading = false;\n\n  constructor(\n    private router: Router,\n    private fb: FormBuilder,\n    private cd: ChangeDetectorRef,\n    private snackbar: MatSnackBar,\n    private authService: AuthService\n  ) {}\n\n  send() {\n    if (this.form.valid && !this.loading) {\n      this.loading = true;\n      this.cd.markForCheck();\n\n      const email = this.form.get('email')?.value || '';\n      const password = this.form.get('password')?.value || '';\n\n      this.authService.login(email, password).subscribe({\n        next: (response: AuthResponse) => {\n          this.loading = false;\n          this.cd.markForCheck();\n          \n          if (response.success) {\n            const roleInfo = response.user?.role_name ? ` (${response.user.role_name})` : '';\n            this.snackbar.open(`Inicio de sesión exitoso${roleInfo}`, 'OK', {\n              duration: 3000\n            });\n            \n            // Navegar al dashboard después del login exitoso\n            this.router.navigate(['/']).then(() => {\n              console.log('✅ Navegación exitosa al dashboard');\n            }).catch(error => {\n              console.error('❌ Error en navegación:', error);\n            });\n          } else {\n            this.snackbar.open(response.message || 'Error en el inicio de sesión', 'Error', {\n              duration: 5000\n            });\n          }\n        },\n        error: (error: any) => {\n          this.loading = false;\n          this.cd.markForCheck();\n          \n          console.error('Error en login:', error);\n          let errorMessage = 'Error en el inicio de sesión';\n          \n          if (error.error && error.error.message) {\n            errorMessage = error.error.message;\n          } else if (error.message) {\n            errorMessage = error.message;\n          }\n          \n          this.snackbar.open(errorMessage, 'Error', {\n            duration: 5000\n          });\n        }\n      });\n    }\n  }\n\n  toggleVisibility() {\n    if (this.visible) {\n      this.inputType = 'password';\n      this.visible = false;\n      this.cd.markForCheck();\n    } else {\n      this.inputType = 'text';\n      this.visible = true;\n      this.cd.markForCheck();\n    }\n  }\n\n  getErrorMessage(fieldName: string): string {\n    const field = this.form.get(fieldName);\n    if (field?.hasError('required')) {\n      return `${fieldName === 'email' ? 'Email' : 'Contraseña'} es requerido`;\n    }\n    if (field?.hasError('email')) {\n      return 'Email inválido';\n    }\n    return '';\n  }\n\n  // Método para probar logout (solo para desarrollo)\n  testLogout() {\n    this.authService.logout().subscribe({\n      next: () => {\n        this.snackbar.open('Logout exitoso', 'Info', { duration: 3000 });\n        this.router.navigate(['/login']);\n      },\n      error: (error) => {\n        this.snackbar.open('Error en logout', 'Error', { duration: 3000 });\n      }\n    });\n  }\n}\n","<div class=\"w-full h-full bg-pattern flex flex-col items-center justify-center\">\n  <div @fadeInUp class=\"card overflow-hidden w-full max-w-md\">\n    <div class=\"p-6 pb-0 flex flex-col items-center justify-center\">\n      <div class=\"fill-current text-center\">\n        <img class=\"w-24\" src=\"assets/img/icons/logos/logo_login.svg\" />\n      </div>\n    </div>\n\n    <div class=\"text-center mt-4\">\n      <h2 class=\"title m-0\">Bienvenido de vuelta</h2>\n      <h4 class=\"body-2 text-secondary m-0\">\n        Inicia sesión con tus credenciales.\n      </h4>\n    </div>\n\n    <div [formGroup]=\"form\" class=\"p-6 flex flex-col gap-4\">\n      <div class=\"flex flex-col\">\n        <mat-form-field class=\"flex-1\">\n          <mat-label>Correo electrónico</mat-label>\n          <input formControlName=\"email\" matInput required />\n          <mat-error *ngIf=\"form.controls.email.hasError('required')\"\n          >Necesitamos un correo electrónico para iniciar sesión\n          </mat-error>\n        </mat-form-field>\n        <mat-form-field class=\"flex-1\">\n          <mat-label>Contraseña</mat-label>\n          <input\n            [type]=\"inputType\"\n            formControlName=\"password\"\n            matInput\n            required />\n          <button\n            (click)=\"toggleVisibility()\"\n            mat-icon-button\n            matIconSuffix\n            matTooltip=\"Alternar visibilidad\"\n            type=\"button\">\n            <mat-icon *ngIf=\"visible\" svgIcon=\"mat:visibility\"></mat-icon>\n            <mat-icon *ngIf=\"!visible\" svgIcon=\"mat:visibility_off\"></mat-icon>\n          </button>\n          <mat-hint>Haz clic en el ojo para alternar visibilidad</mat-hint>\n          <mat-error *ngIf=\"form.controls.password.hasError('required')\"\n          >Necesitamos una contraseña para iniciar sesión\n          </mat-error>\n        </mat-form-field>\n      </div>\n\n      <div class=\"flex items-center justify-between\">\n        <mat-checkbox class=\"caption\" color=\"primary\">Recordarme</mat-checkbox>\n        <a [routerLink]=\"['/forgot-password']\" class=\"caption\"\n        >¿Olvidaste tu contraseña?</a\n        >\n      </div>\n\n      <button \n        (click)=\"send()\" \n        color=\"primary\" \n        mat-raised-button \n        type=\"button\"\n        [disabled]=\"loading || form.invalid\">\n        <span *ngIf=\"!loading\">INICIAR SESIÓN</span>\n        <span *ngIf=\"loading\">INICIANDO...</span>\n      </button>\n\n\n    </div>\n  </div>\n</div>\n"],"names":["animate","style","transition","trigger","fadeInUpAnimation","duration","transform","opacity","fadeInUp400ms","ReactiveFormsModule","Validators","RouterLink","MatSnackBarModule","MatCheckboxModule","MatIconModule","MatTooltipModule","MatButtonModule","NgIf","MatInputModule","MatFormFieldModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","LoginComponent","constructor","router","fb","cd","snackbar","authService","form","group","email","required","password","inputType","visible","loading","send","valid","markForCheck","get","value","login","subscribe","next","response","success","roleInfo","user","role_name","open","navigate","then","console","log","catch","error","message","errorMessage","toggleVisibility","getErrorMessage","fieldName","field","hasError","testLogout","logout","_","ɵɵdirectiveInject","i1","Router","i2","FormBuilder","ChangeDetectorRef","i3","MatSnackBar","i4","AuthService","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵtemplate","LoginComponent_mat_error_16_Template","ɵɵlistener","LoginComponent_Template_button_click_21_listener","LoginComponent_mat_icon_22_Template","LoginComponent_mat_icon_23_Template","LoginComponent_mat_error_26_Template","LoginComponent_Template_button_click_32_listener","LoginComponent_span_33_Template","LoginComponent_span_34_Template","ɵɵadvance","ɵɵproperty","undefined","controls","ɵɵpureFunction0","_c0","invalid","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","FormGroupDirective","FormControlName","i5","MatFormField","MatLabel","MatHint","MatError","MatSuffix","i6","MatInput","i7","MatButton","MatIconButton","i8","MatTooltip","i9","MatIcon","i10","MatCheckbox","styles","data","animation","changeDetection"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}